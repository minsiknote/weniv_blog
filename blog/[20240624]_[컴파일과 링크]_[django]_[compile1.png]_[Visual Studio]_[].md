# 컴파일과 링크

소스 파일을 작성하였으면 다음 단계는 소스 파일을 <u>컴파일(compile)</u>하고 <u>링크(link)</u>하는 것이다.

이때 필요한 것이 <u>컴파일러(compiler)</u>이다.

컴파일러는 소스 파일을 분석하여 <u>컴퓨터에서 실행이 가능하도록 기계어로 변환</u>한다. 일종의 번역기 같은 역활이다.

------

## **컴파일의 동작**

1. 소스 파일의 문장을 분석하여 문법에 맞도록 작성되었는지를 체크한다.

   \- 문법적 오류가 발견되면 사용자에게 오류를 통보하고 컴파일은 종료된다 -> 소스 작성 단계로 되돌아가서 소스 파일을 수정하여야 한다.

   \- 컴파일 오류는 없지만 알고리즘을 잘못 생각하여 의도했던 대로 실행되지 않는 오류를 논리적인 오류(logical error)라고 한다.

   -> 의도했던 대로 프로그램이 동작하지 않으면 소스 프로그램을 수정하고 다시 "컴파일->링크->실행"의 단계를 거쳐야 한다. 이러한 

​      오류 수정 작업을 보통 <u>디버깅(debugging)</u>이라 하고, 사용되는 도구를 디버거라고 한다.

2. 오류가 없다면 컴파일러는 각 문장들을 기계어로 변환된다. 이 기계어로 되어 있는 파일은 <u>오브젝트 파일(object file)</u>이라고 불린다.

​	윈도우즈에서는 ".obj" 확장자를 갖는다.

![컴파일 성공](/img/compile2.png)

​						**컴파일 성공**

![obj 파일 생성](/img/compile1.png)

​				**기계어로 변환된 .obj 파일 생성**

------

## **링크의 동작**

링크는 오브젝트 파일들을 라이브러리와 연결하여 실행 프로그램을 만든다.

라이브러리(library)란 프로그래머들이 많이 사용되는 기능을 미리 작성해 놓은 것으로 컴파일러에 내장되어 있다.

링크를 수행하는 프로그램을 <u>링커(linker)</u>라고 한다.

 -> ex) 윈도우즈에서는 test.obj 파일에 라이브러리를 붙여서 실행가능한 파일인 test.exe가 생성된다.

 

이와 같이 컴파일과 링크의 두 단계로 분리시켜 실행 파일을 만드는 이유는 무엇일까?

 -> 여러 개의 소스 파일로 구성된 프로그램의 경우, 각각의 파일을 따로 따로 컴파일한 후에 링커를 통하여 결합한다. 만약 하나의 소스 파일만 변경한 경우에도 모든 소스 파일을 다시 컴파일 하여야 한다면 상당한 시간이 낭비될 것이다. 만약 링크 단계가 있다면 변경된 소스파일만 다시 컴파일하면 된다.

 

비주얼 스튜디오에서는 컴파일과 링크 과정을 묶어서 <u>빌드(build)</u>라고 한다.

![빌드](/img/compile3.png)

​			**비주얼 스튜디오에서의 컴파일 -> 링크 과정**

------

출처: 쉽게 풀어쓴 C언어 Express 개정 3판, p51 ~ 55